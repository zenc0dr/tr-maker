<backend-component-popover
    ref="popover"
    container-css-class="publishing-controls"
    :always-visible="true"
    @shown="onShown"
>
    <div class="publishing-controls-popover-body">
        <div ref="parentId"></div>
        <div class="slug-section">
            <span class="label-link text-muted" v-if="showTreeControls && !showFullSlug" @click.stop="onShowFullSlugClick"><?= e(Lang::get('tailor::lang.edit.view_full_slug')) ?></span>
            <div ref="slug" class="clearfix"></div>
            <span class="full-slug text-muted" v-text="fullSlug" v-if="showTreeControls && showFullSlug"></span>
        </div>
        <div ref="enabled"></div>
        <div class="clearfix"></div>

        <p v-if="isDraft" class="draft-publish-notice">
            <?= e(Lang::get('tailor::lang.edit.draft_publishing_notice')) ?>
            <span class="js-link" @click="$emit('publishdraftclick', $event)"><?= e(Lang::get('tailor::lang.edit.apply_draft_to_make_primary')) ?></span>.
        </p>

        <div class="enabled-controls" v-show="state.current.enabled">
            <div class="date-section">
                <p v-show="!showPublishDate">
                    <i class="octo-icon-calendar-check"></i>
                    <span @click="onShowPublishDateClick"><?= e(Lang::get('tailor::lang.edit.schedule_publish_date')) ?></span>
                </p>

                <span class="label-link text-muted" v-if="showPublishDate" @click.stop="onRemovePublishDateClick"><?= e(Lang::get('tailor::lang.edit.remove')) ?></span>
                <div v-show="showPublishDate" ref="publishDate"></div>
                <div class="clearfix"></div>
            </div>

            <div class="date-section">
                <p v-show="!showExpiryDate">
                    <i class="octo-icon-calendar-disable"></i>
                    <span @click="onShowExpiryDateClick"><?= e(Lang::get('tailor::lang.edit.set_expiry_date')) ?></span>
                </p>

                <span class="label-link text-muted" v-if="showExpiryDate" @click.stop="onRemoveExpiryDateClick"><?= e(Lang::get('tailor::lang.edit.remove')) ?></span>
                <div v-show="showExpiryDate" ref="expiryDate"></div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</backend-component-popover>
